<!doctype html>
<html lang="nb">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hjelpeportalen</title>

  <style>
    :root {
      /* Brand-farge – juster én gang, påvirker logo-tekst mm. */
      --brand-color: #1f5fbf;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      background: #fff;
      color:#111;
    }

    .wrap {
      max-width: 960px;
      margin: 0 auto;
      padding: 20px;
    }

    /* ---------- TOPPBAR ---------- */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 12px 0 32px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      color: inherit;
    }

    .brand-logo {
      width: 52px;   /* ⬅️ logo litt større */
      height: 52px;
      object-fit: contain;
    }

    .brand-name {
      font-weight: 800;
      font-size: 20px;
      letter-spacing: -0.4px;
      color: var(--brand-color); /* ⬅️ samme farge som logo */
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .nav-link {
      text-decoration: none;
      color: #111;
      font-size: 14px;
      padding: 8px 10px;
      border-radius: 10px;
    }

    .nav-link:hover {
      background: #f3f4f6;
    }

    .nav-cta {
      text-decoration: none;
      color: #fff;
      background: #111;
      font-size: 14px;
      padding: 9px 16px;
      border-radius: 14px;
    }

    .nav-cta:hover {
      opacity: 0.9;
    }

    @media (max-width: 760px) {
      .nav {
        display: none;
      }
    }

    /* ---------- INNHOLD ---------- */
    h1 {
      font-size: 44px;
      margin: 0 0 14px;
      letter-spacing: -0.6px;
    }

    .ingress {
      font-size: 18px;
      line-height: 1.5;
      color: #333;
      margin: 0 0 26px;
      max-width: 720px;
    }

    .content {
      font-size: 17px;
      line-height: 1.7;
      color:#111;
      max-width: 720px;
    }

    .content h2 { margin: 26px 0 10px; }
    .content h3 { margin: 20px 0 8px; }

    .okline { margin: 10px 0; }

    .footer {
      margin-top: 48px;
      font-size: 13px;
      color:#666;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- TOPPBAR -->
    <header class="topbar">
      <a class="brand" href="/" aria-label="Hjelpeportalen">
        <img class="brand-logo" src="/images/logo.png" alt="Hjelpeportalen logo" />
        <span class="brand-name">Hjelpeportalen</span>
      </a>

      <nav class="nav">
        <a class="nav-link" href="#tjenester">Tjenester</a>
        <a class="nav-link" href="#om">Om oss</a>
        <a class="nav-link" href="#kontakt">Kontakt</a>
        <a class="nav-cta" href="#kontakt">Bestill hjelp</a>
      </nav>
    </header>

    <!-- HOVEDINNHOLD -->
    <h1 id="title">Laster…</h1>
    <p class="ingress" id="ingress"></p>
    <div class="content" id="content"></div>

    <div class="footer">
      <span id="status"></span>
    </div>
  </div>

  <script>
    function parseFrontmatter(md) {
      const parts = md.split('---');
      if (parts.length < 3) {
        return { frontmatter: {}, body: md.trim() };
      }

      const fmRaw = parts[1].trim();
      const body = parts.slice(2).join('---').trim();

      const frontmatter = {};
      fmRaw.split('\n').forEach(line => {
        const trimmed = line.trim();
        if (!trimmed) return;
        const idx = trimmed.indexOf(':');
        if (idx === -1) return;
        const key = trimmed.slice(0, idx).trim();
        const value = trimmed.slice(idx + 1).trim();
        frontmatter[key] = value;
      });

      return { frontmatter, body };
    }

    function simpleMarkdownToHtml(text) {
      let html = text;

      html = html.replace(/^###\s+(.*)$/gim, '<h3>$1</h3>');
      html = html.replace(/^##\s+(.*)$/gim, '<h2>$1</h2>');
      html = html.replace(/^#\s+(.*)$/gim, '<h1>$1</h1>');

      html = html.replace(/^\s*✔\s*(.*)$/gim, '<div class="okline">✔ $1</div>');
      html = html.replace(/\n{2,}/g, '<br><br>');
      html = html.replace(/\n/g, '<br>');

      return html;
    }

    fetch("/content/home.md", { cache: "no-store" })
      .then(res => res.text())
      .then(md => {
        const { frontmatter, body } = parseFrontmatter(md);

        document.getElementById("title").innerText =
          frontmatter.title || "Hjelpeportalen";

        document.getElementById("ingress").innerText =
          frontmatter.ingress || "";

        document.getElementById("content").innerHTML =
          simpleMarkdownToHtml(body);

        document.getElementById("status").innerText =
          "Innhold lastet fra /content/home.md";
      })
      .catch(err => {
        document.getElementById("title").innerText = "Feil";
        document.getElementById("ingress").innerText = "Kunne ikke laste innhold.";
        document.getElementById("content").innerText = err.toString();
      });
  </script>
</body>
</html>
