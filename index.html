<!doctype html>
<html lang="nb">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hjelpeportalen</title>

  <style>
    :root { --brand-color: #1f5fbf; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      background: #fff;
      color:#111;
    }

    .wrap {
      max-width: 980px;
      margin: 0 auto;
      padding: 28px 22px;
    }

    /* ---------- TOPPBAR (desktop) ---------- */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 24px;
      padding: 20px 0 48px;
      position: relative; /* for mobil-sentrering */
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 4px; /* ✅ enda nærmere logo */
      text-decoration: none;
      color: inherit;
      line-height: 1;
    }

    .brand-logo {
      width: 110px;
      height: 110px;
      object-fit: contain;
      flex: 0 0 auto;
    }

    .brand-name {
      font-weight: 800;
      font-size: 18px;
      letter-spacing: -0.3px;
      color: var(--brand-color);
      white-space: nowrap;
    }

    .nav {
      display: flex;
      align-items: center;
      gap: 18px;
    }

    .nav-link {
      text-decoration: none;
      color: #111;
      font-size: 14px;
      padding: 8px 10px;
      border-radius: 10px;
    }
    .nav-link:hover { background: #f3f4f6; }

    .nav-cta {
      text-decoration: none;
      color: #fff;
      background: #111;
      font-size: 14px;
      padding: 10px 18px;
      border-radius: 999px;
    }
    .nav-cta:hover { opacity: 0.9; }

    /* ---------- MOBIL: Komplett-stil topplinje ---------- */
    .menu-btn {
      display: none;
      border: 0;
      background: transparent;
      font-size: 22px;
      line-height: 1;
      cursor: pointer;
      padding: 10px 10px;
      border-radius: 12px;
    }
    .menu-btn:hover { background: #f3f4f6; }

    .mobile-cta {
      display: none;
      text-decoration: none;
      color: #fff;
      background: #111;
      font-size: 13px;
      padding: 10px 14px;
      border-radius: 999px;
      white-space: nowrap;
    }

    .menu-panel {
      display: none;
      margin-top: 10px;
      border: 1px solid #e5e7eb;
      background: #fff;
      border-radius: 16px;
      padding: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }

    .menu-panel a {
      display: block;
      padding: 12px 12px;
      border-radius: 12px;
      text-decoration: none;
      color: #111;
      font-size: 15px;
    }
    .menu-panel a:hover { background: #f3f4f6; }

    .menu-panel .menu-cta {
      margin-top: 8px;
      background: #111;
      color: #fff;
      text-align: center;
      font-weight: 600;
    }

    /* ---------- RESPONSIVE ---------- */
    @media (max-width: 760px) {
      .wrap { padding: 16px 14px; }
      .topbar { padding: 10px 0 18px; }

      /* Skjul desktop nav */
      .nav { display: none; }

      /* Mobil: venstre/høyre knapper synlige */
      .menu-btn { display: inline-flex; align-items:center; justify-content:center; }
      .mobile-cta { display: inline-flex; align-items:center; justify-content:center; }

      /* Mobil: sentrert logo + navn som Komplett */
      .brand {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        gap: 6px;
      }

      .brand-logo { width: 42px; height: 42px; }  /* mobil-logo kompakt som Komplett */
      .brand-name { font-size: 18px; }            /* “butikk-navn” tydelig på mobil */

      /* Mobil: topbar plasserer venstre/høyre “rails” */
      .topbar-left { display:flex; align-items:center; }
      .topbar-right { display:flex; align-items:center; }
    }

    /* ---------- INNHOLD ---------- */
    h1 {
      font-size: 44px;
      margin: 0 0 14px;
      letter-spacing: -0.6px;
    }

    .ingress {
      font-size: 18px;
      line-height: 1.5;
      color: #333;
      margin: 0 0 26px;
      max-width: 740px;
    }

    .content {
      font-size: 17px;
      line-height: 1.7;
      color:#111;
      max-width: 740px;
    }

    .okline { margin: 10px 0; }

    .footer {
      margin-top: 52px;
      font-size: 13px;
      color:#666;
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- TOPPBAR -->
    <header class="topbar">
      <div class="topbar-left">
        <button class="menu-btn" id="menuBtn" aria-expanded="false" aria-controls="menuPanel" aria-label="Åpne meny">
          ☰
        </button>
      </div>

      <a class="brand" href="/" aria-label="Hjelpeportalen">
        <img class="brand-logo" src="/images/logo.png" alt="Hjelpeportalen logo" />
        <span class="brand-name">Hjelpeportalen</span>
      </a>

      <div class="topbar-right">
        <a class="mobile-cta" href="#kontakt">Bestill</a>
      </div>

      <!-- Desktop nav -->
      <nav class="nav" aria-label="Hovedmeny">
        <a class="nav-link" href="#tjenester">Tjenester</a>
        <a class="nav-link" href="#om">Om oss</a>
        <a class="nav-link" href="#kontakt">Kontakt</a>
        <a class="nav-link" href="#priser">Priser</a>
        <a class="nav-cta" href="#kontakt">Bestill hjelp</a>
      </nav>
    </header>

    <!-- Mobil meny panel -->
    <div class="menu-panel" id="menuPanel">
      <a href="#tjenester">Tjenester</a>
      <a href="#om">Om oss</a>
      <a href="#kontakt">Kontakt</a>
      <a href="#priser">Priser</a>
      <a class="menu-cta" href="#kontakt">Bestill hjelp</a>
    </div>

    <!-- HOVEDINNHOLD -->
    <h1 id="title">Laster…</h1>
    <p class="ingress" id="ingress"></p>
    <div class="content" id="content"></div>

    <div class="footer">
      <span id="status"></span>
    </div>
  </div>

  <script>
    // Mobilmeny toggle
    (function () {
      const btn = document.getElementById("menuBtn");
      const panel = document.getElementById("menuPanel");
      if (!btn || !panel) return;

      btn.addEventListener("click", () => {
        const open = panel.style.display === "block";
        panel.style.display = open ? "none" : "block";
        btn.setAttribute("aria-expanded", open ? "false" : "true");
      });

      // Lukk etter klikk
      panel.querySelectorAll("a").forEach(a => {
        a.addEventListener("click", () => {
          panel.style.display = "none";
          btn.setAttribute("aria-expanded", "false");
        });
      });
    })();

    // CMS-innhold
    function parseFrontmatter(md) {
      const parts = md.split('---');
      if (parts.length < 3) return { frontmatter: {}, body: md.trim() };

      const fmRaw = parts[1].trim();
      const body = parts.slice(2).join('---').trim();

      const frontmatter = {};
      fmRaw.split('\n').forEach(line => {
        const t = line.trim();
        if (!t) return;
        const i = t.indexOf(':');
        if (i === -1) return;
        frontmatter[t.slice(0, i).trim()] = t.slice(i + 1).trim();
      });

      return { frontmatter, body };
    }

    function simpleMarkdownToHtml(text) {
      let html = text;
      html = html.replace(/^\s*✔\s*(.*)$/gim, '<div class="okline">✔ $1</div>');
      html = html.replace(/\n{2,}/g, '<br><br>');
      html = html.replace(/\n/g, '<br>');
      return html;
    }

    fetch("/content/home.md", { cache: "no-store" })
      .then(r => r.text())
      .then(md => {
        const { frontmatter, body } = parseFrontmatter(md);
        document.getElementById("title").innerText = frontmatter.title || "Hjelpeportalen";
        document.getElementById("ingress").innerText = frontmatter.ingress || "";
        document.getElementById("content").innerHTML = simpleMarkdownToHtml(body);
        document.getElementById("status").innerText = "Innhold lastet fra /content/home.md";
      });
  </script>
</body>
</html>
